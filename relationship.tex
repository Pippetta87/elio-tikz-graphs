% Author: PÃ¡vel Calado
% the tikz-er2.sty package is available at:
% http://tagus.inesc-id.pt/~pcalado/tikzer2/tikz-er2.
\documentclass[../main.tex]{subfiles}

\begin{document}

\thispagestyle{empty}

\tikzstyle{every entity} = [top color=white, bottom color=blue!30, 
                            draw=blue!50!black!100, drop shadow]
\tikzstyle{every weak entity} = [drop shadow={shadow xshift=.7ex, 
                                 shadow yshift=-.7ex}]
\tikzstyle{every attribute} = [top color=white, bottom color=yellow!20, 
                               draw=yellow, node distance=1cm, drop shadow,text width=1.5cm]
\tikzstyle{every relationship} = [top color=white, bottom color=red!20, 
                                  draw=red!50!black!100, drop shadow,text width=2cm]
\tikzstyle{every isa} = [top color=white, bottom color=green!20, 
                         draw=green!50!black!100, drop shadow,]

\centering
\scalebox{.45}{
\begin{tikzpicture}[node distance=1.5cm, every edge/.style={link}]

  \node[entity] (ssm) at (0,0) {SSM};
  \node[attribute] (hydro) [left=of ssm] {Equilibrio idrostatico} edge (ssm);
  \node[attribute] (thermal) [below=of hydro] {Equilibrio termico locale} edge (ssm);
  \node[attribute] (opacity) [below=of thermal] {Equilibrio radiativo + criterio di Schwartzchild} edge (ssm);
  
  \node[relationship] (calibration) [above=1cm of ssm] {Calibrazione luminosit\'a e raggio} edge (ssm);

  \node[relationship] (modelobs) [below=3cm of ssm] {Discrepanze modello/osservazioni} edge (ssm);
  \node[entity] (surfaceobs) [above right=1cm and 2cm of ssm] {Osservabili stellari} edge (modelobs);
  \node[entity] (sismobs) [below right=1cm and 2cm of ssm] {Osservabili sismologiche} edge (modelobs);

\draw[link] (surfaceobs.70) |- node [pos=0.05, auto, swap] {accuratezza} (unphys);
\draw[link] (sismobs.70) |- node [pos=0.05, auto, swap] {accuratezza} (unphys);

 \node[weak entity] (unphys) [above left=1cm and 2 cm of ssm] {Incertezze fisica del modello} edge [<-] (ssm);
  

\end{tikzpicture}

}

\end{document}
