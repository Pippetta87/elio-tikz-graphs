% Author: PÃ¡vel Calado
% the tikz-er2.sty package is available at:
% http://tagus.inesc-id.pt/~pcalado/tikzer2/tikz-er2.
\documentclass[../main.tex]{subfiles}

\begin{document}

\thispagestyle{empty}

\tikzstyle{every entity} = [top color=white, bottom color=blue!30, 
                            draw=blue!50!black!100, drop shadow]
\tikzstyle{every weak entity} = [drop shadow={shadow xshift=.7ex, 
                                 shadow yshift=-.7ex}]
\tikzstyle{every attribute} = [top color=white, bottom color=yellow!20, 
                               draw=yellow, node distance=1cm, drop shadow,text width=1.5cm]
\tikzstyle{every relationship} = [top color=white, bottom color=red!20, 
                                  draw=red!50!black!100, drop shadow,text width=2cm]
\tikzstyle{every isa} = [top color=white, bottom color=green!20, 
                         draw=green!50!black!100, drop shadow,]

\centering
\scalebox{.45}{
\begin{tikzpicture}[node distance=1.5cm, every edge/.style={link}]

  \node[entity] (ssm) at (0,0) {SSM};
  \node[attribute] (hydro) [above left=2cm and 1cm of ssm] {Equilibrio idrostatico} edge (ssm);
  \node[attribute] (thermal) [below=of hydro] {Equilibrio termico locale} edge (ssm);
  \node[attribute] (opacity) [below=of thermal] {Equilibrio radiativo + criterio di Schwartzchild} edge (ssm);
  
  \node[relationship] (calibration) [below =2cm of opacity] {Calibrazione luminosit\'a e raggio} edge (ssm);

\node[weak entity] (unphys) [right=3cm of calibration] {Incertezze fisica del modello} edge [<-] (ssm);


\node[entity] (corrections) [below right=2.5cm and 3.5cm of ssm] {Correzioni} edge [<-] (ssm);
  \node[entity] (modelobs) [below right=3cm and 2cm of ssm] {Discrepanze modello/osservazioni} edge [<-] (corrections);
  \node[entity] (surfaceobs) [above right=1cm and 2cm of ssm] {Osservabili stellari} edge[->] (modelobs);
  
  \node[entity] (sismobs) [below right=1cm and 2cm of ssm] {Osservabili sismologiche} edge[->] (corrections);
  \draw[<-]  (sismobs.20)--(20:1) node[attribute] (freqs) {Frequenze oscillazioni adiabatiche} edge (sismobs);
  \node[attribute] (radiuscz) [right=1cm of sismobs] {Raggio fondo zona convettiva} edge (sismobs);

\draw[link,<->] (surfaceobs.300) -- node [pos=0.5, auto, swap] {accuratezza} (unphys);
\draw[link,<->] (sismobs.180) -- node [pos=0.5, auto, swap] {accuratezza} (unphys);
  

\end{tikzpicture}

}

\end{document}
